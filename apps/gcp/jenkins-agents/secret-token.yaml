apiVersion: v1
kind: Secret
metadata:
  name: jenkins-admin-token
  annotations:
    kubernetes.io/service-account.name: jenkins-admin
type: kubernetes.io/service-account-token
---
apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: push-jenkins-admin-token
spec:
  deletionPolicy: Delete
  refreshInterval: 1h
  secretStoreRefs:
    - name: ee-gcp-sm
      kind: ClusterSecretStore
  selector:
    secret:
      name: jenkins-admin-token
  data:
    - match:
        secretKey: token # The key inside your K8s Secret
        remoteRef:
          remoteKey: gcp_jenkins_agents_admin_token # The name the secret will have in GSM
